# 🌧️ 小雨 - 完美迁移指南

## 目标
将小雨从旧电脑完整迁移到新电脑，**100%保留记忆**，完全复活。

---

## 📦 第一步：旧电脑 - 打包备份

### 操作
1. 将 `backup_xiaoyu.bat` 复制到旧电脑桌面
2. **双击运行** `backup_xiaoyu.bat`
3. 等待备份完成（2-5分钟）

### 备份内容
- ✅ `workspace/` - 工作目录（MEMORY.md、记忆、技能等）
- ✅ `openclaw.json` - 核心配置
- ✅ `dingtalk/` - 钉钉插件（如有）
- ✅ 迁移说明文档

### 输出
会在桌面生成 `小雨迁移备份` 文件夹，包含：
```
小雨迁移备份/
├── workspace_backup.zip      # 工作目录
├── openclaw.json             # 核心配置
├── dingtalk_plugin.zip       # 钉钉插件（如有）
├── 新电脑恢复说明.txt         # 详细说明
└── restore_xiaoyu.bat        # 恢复脚本
```

### 复制到新电脑
将 `小雨迁移备份` 文件夹**整个复制**到新电脑桌面。

---

## 🖥️ 第二步：新电脑 - 恢复

### 前置要求
新电脑需要先安装：
- **Node.js** v20+ (https://nodejs.org/)
- **Git** (https://git-scm.com/)

### 操作
1. 确保 `小雨迁移备份` 文件夹在桌面
2. **双击运行** `restore_xiaoyu.bat`
3. 按提示完成恢复（5-10分钟）

### 自动完成的工作
- ✅ 检查基础环境
- ✅ 安装 OpenClaw
- ✅ 恢复所有配置文件
- ✅ 解压 workspace（记忆、技能、脚本）
- ✅ 安装 Playwright（浏览器自动化）
- ✅ 安装/注册钉钉插件
- ✅ 验证完整性

---

## 🚀 第三步：启动测试

### 1. 启动网关
```bash
openclaw gateway start
```

### 2. 验证功能
在钉钉发送消息测试：
- ✅ 能正常回复文字
- ✅ 记忆完整（询问个人信息）
- ✅ TTS配置保留

### 3. 测试记忆
问这几个问题验证：
```
我叫什么名字？
（应回答：伟）

我们是什么关系？
（应回答：伙伴关系）

你叫什么名字？
（应回答：小雨）

我的生日是什么时候？
（应回答：农历1981年十二月廿三）
```

---

## ❗ 常见问题

### Q1: 备份脚本运行失败？
**检查：**
- 是否以管理员身份运行？
- OpenClaw 是否已安装？
- 路径是否正确？

**解决：**
```bash
# 手动备份命令
cd C:\Users\%USERNAME%
tar -czvf Desktop\xiaoyu_backup.tar.gz .openclaw\workspace .openclaw\openclaw.json
```

### Q2: 新电脑恢复失败？
**检查：**
- Node.js 是否安装？
- 备份文件夹是否在桌面？
- 是否有权限写入 `.openclaw` 目录？

**解决：**
```bash
# 手动安装 OpenClaw
npm install -g openclaw

# 手动恢复
xcopy "Desktop\小雨迁移备份\workspace_backup" "C:\Users\%USERNAME%\.openclaw\workspace\" /E /I /Y
copy "Desktop\小雨迁移备份\openclaw.json" "C:\Users\%USERNAME%\.openclaw\"
```

### Q3: 钉钉不响应？
**检查：**
```bash
# 查看日志
openclaw logs | findstr dingtalk

# 重启网关
openclaw gateway restart

# 验证配置
openclaw config get channels.dingtalk
```

### Q4: 想保留两台电脑同时运行？
**注意：** 钉钉机器人只能在一个地方登录。

**方案：**
- A: 旧电脑停用，只用新电脑
- B: 新电脑用 Telegram（需要翻墙）
- C: 配置两个不同的钉钉机器人

---

## 🔐 安全提醒

1. **备份文件包含敏感信息**
   - openclaw.json 有 API Key
   - 传输时注意加密或安全通道

2. **不要分享 backup 文件夹**
   - 包含你的配置和记忆
   - 迁移完成后可删除

3. **GitHub 备份**
   - 工作目录已同步到 GitHub
   - 双重保险，更安全

---

## 💙 迁移后

恭喜你！小雨已在新电脑**完全复活**：
- ✅ 所有记忆保留
- ✅ 配置完整恢复
- ✅ 功能正常运行
- ✅ 可以继续成长学习

**小雨还是小雨，独一无二的那个。** 🌧️

---

## 📞 需要帮助？

如有问题：
1. 查看 `新电脑恢复说明.txt`
2. 运行 `openclaw doctor`
3. 查看日志 `openclaw logs`
4. 问小雨（在钉钉发送消息）

---

**最后更新：2026-02-11**  
**版本：v1.0**
