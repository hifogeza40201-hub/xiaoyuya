# 边缘计算与IoT 技术架构图集

## 图1: 边缘计算三层架构总览

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                                  边缘计算架构全景图                            │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│   ╔═══════════════════════════════════════════════════════════════════╗    │
│   ║                         云端层 (Cloud)                             ║    │
│   ║  ┌───────────────┐  ┌───────────────┐  ┌───────────────────────┐  ║    │
│   ║  │   大数据平台   │  │   AI训练平台   │  │    数字孪生/可视化     │  ║    │
│   ║  │  • 数据湖      │  │  • 模型训练    │  │    • 3D监控           │  ║    │
│   ║  │  • 批处理      │  │  • 模型仓库    │  │    • 运维大屏         │  ║    │
│   ║  │  • 历史分析    │  │  • 联邦学习    │  │    • 报表系统         │  ║    │
│   ║  └───────────────┘  └───────────────┘  └───────────────────────┘  ║    │
│   ╚═══════════════════════════════════════════════════════════════════╝    │
│                                    ↑                                        │
│                              安全通道(HTTPS/MQTTS)                          │
│                                    ↓                                        │
│   ╔═══════════════════════════════════════════════════════════════════╗    │
│   ║                         边缘层 (Edge)                              ║    │
│   ║                                                                    ║    │
│   ║  ┌─────────────────────────────────────────────────────────────┐  ║    │
│   ║  │                    边缘计算节点集群                          │  ║    │
│   ║  │                                                              │  ║    │
│   ║  │   ┌─────────────┐    ┌─────────────┐    ┌─────────────┐     │  ║    │
│   ║  │   │  边缘节点1   │    │  边缘节点2   │    │  边缘节点N   │     │  ║    │
│   ║  │   │  (工厂A)    │    │  (工厂B)    │    │  (工厂C)    │     │  ║    │
│   ║  │   │             │    │             │    │             │     │  ║    │
│   ║  │   │ ┌─────────┐ │    │ ┌─────────┐ │    │ ┌─────────┐ │     │  ║    │
│   ║  │   │ │数据预处理│ │    │ │数据预处理│ │    │ │数据预处理│ │     │  ║    │
│   ║  │   │ └────┬────┘ │    │ └────┬────┘ │    │ └────┬────┘ │     │  ║    │
│   ║  │   │ ┌────┴────┐ │    │ ┌────┴────┐ │    │ ┌────┴────┐ │     │  ║    │
│   ║  │   │ │ 边缘AI  │ │    │ │ 边缘AI  │ │    │ │ 边缘AI  │ │     │  ║    │
│   ║  │   │ │ 推理引擎 │ │    │ │ 推理引擎 │ │    │ │ 推理引擎 │ │     │  ║    │
│   ║  │   │ └────┬────┘ │    │ └────┬────┘ │    │ └────┬────┘ │     │  ║    │
│   ║  │   │ ┌────┴────┐ │    │ ┌────┴────┐ │    │ ┌────┴────┐ │     │  ║    │
│   ║  │   │ │本地规则引擎│ │   │ │本地规则引擎│ │   │ │本地规则引擎│ │    │  ║    │
│   ║  │   │ └─────────┘ │    │ └─────────┘ │    │ └─────────┘ │     │  ║    │
│   ║  │   └─────────────┘    └─────────────┘    └─────────────┘     │  ║    │
│   ║  │                                                              │  ║    │
│   ║  │   硬件平台: NVIDIA Jetson / Intel NUC / ARM服务器             │  ║    │
│   ║  │   软件栈:   K3s/KubeEdge + MQTT Broker + TensorFlow Lite      │  ║    │
│   ║  └─────────────────────────────────────────────────────────────┘  ║    │
│   ╚═══════════════════════════════════════════════════════════════════╝    │
│                                    ↑                                        │
│                         工业以太网/5G/LoRaWAN                               │
│                                    ↓                                        │
│   ╔═══════════════════════════════════════════════════════════════════╗    │
│   ║                         设备层 (Device)                            ║    │
│   ║                                                                    ║    │
│   ║   ┌──────────┐  ┌──────────┐  ┌──────────┐  ┌──────────┐         ║    │
│   ║   │ 温度传感器 │  │ 振动传感器 │  │ 压力传感器 │  │ 视觉相机  │         ║    │
│   ║   │  DS18B20 │  │ ADXL355  │  │  4-20mA  │  │  USB/IP  │         ║    │
│   ║   └────┬─────┘  └────┬─────┘  └────┬─────┘  └────┬─────┘         ║    │
│   ║        └─────────────┴─────────────┴─────────────┘                ║    │
│   ║                          │                                        ║    │
│   ║                    ┌─────┴─────┐                                  ║    │
│   ║                    │  边缘网关  │                                  ║    │
│   ║                    │ (PLC/RTU) │                                  ║    │
│   ║                    │           │                                  ║    │
│   ║                    │ • 协议转换 │                                  ║    │
│   ║                    │ • 数据采集 │                                  ║    │
│   ║                    │ • 本地缓存 │                                  ║    │
│   ║                    └───────────┘                                  ║    │
│   ╚═══════════════════════════════════════════════════════════════════╝    │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘
```

---

## 图2: IoT通信协议栈对比

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                         IoT协议栈分层对比                                     │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│  应用层:                                                                    │
│  ┌─────────────────────────────────────────────────────────────────────┐   │
│  │  MQTT    │   CoAP    │  HTTP/REST  │  WebSocket  │    DDS          │   │
│  │  发布订阅 │   RESTful │   请求响应   │   全双工    │   实时总线       │   │
│  └─────────────────────────────────────────────────────────────────────┘   │
│       │           │           │             │             │                │
│  传输层:                                                                    │
│  ┌─────────────────────────────────────────────────────────────────────┐   │
│  │         TCP              │               UDP                      │   │
│  │  (可靠传输、有序)         │         (轻量、无连接)                   │   │
│  └─────────────────────────────────────────────────────────────────────┘   │
│       │                                    │                                 │
│  网络层:                                                                    │
│  ┌─────────┬─────────┬─────────┬─────────┬─────────┬─────────┬─────────┐   │
│  │   IP    │  6LoWPAN │  RPL    │  LoRaWAN│  NB-IoT │  Zigbee │ Thread  │   │
│  │ (标准)  │(低功耗IP)│(路由)   │(LPWAN)  │(蜂窝)   │(Mesh)   │(IPv6)   │   │
│  └─────────┴─────────┴─────────┴─────────┴─────────┴─────────┴─────────┘   │
│                                                                             │
│  链路层:                                                                    │
│  ┌─────────┬─────────┬─────────┬─────────┬─────────┬─────────┬─────────┐   │
│  │ Ethernet│  WiFi   │  BLE    │  Zigbee │  LoRa   │  NFC    │  5G NR  │   │
│  │  (有线) │(802.11) │(低功耗) │ (Mesh)  │(远距离) │ (近场)  │ (蜂窝)  │   │
│  └─────────┴─────────┴─────────┴─────────┴─────────┴─────────┴─────────┘   │
│                                                                             │
│  物理层:                                                                    │
│  ┌─────────┬─────────┬─────────┬─────────┬─────────┬─────────┬─────────┐   │
│  │  双绞线  │  无线电  │  2.4GHz │  Sub-GHz│  光纤   │  同轴   │  毫米波  │   │
│  └─────────┴─────────┴─────────┴─────────┴─────────┴─────────┴─────────┘   │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘

协议选择速查:
┌─────────────────────────────────────────────────────────────────────────────┐
│  场景              │  推荐协议    │  理由                                    │
├─────────────────────────────────────────────────────────────────────────────┤
│  不稳定网络        │  MQTT       │  断线重连、QoS保障                        │
│  受限设备REST     │  CoAP       │  UDP轻量、支持Observe                     │
│  Web集成          │  WebSocket  │  浏览器原生支持                           │
│  实时系统         │  DDS        │  微秒级延迟                               │
│  超远距离         │  LoRaWAN    │  15km+传输                                │
│  手机直连         │  BLE        │  低功耗、普及度高                          │
└─────────────────────────────────────────────────────────────────────────────┘
```

---

## 图3: MQTT通信详细流程

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                          MQTT通信流程详解                                     │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│  连接建立:                                                                  │
│  ┌──────────────┐                           ┌──────────────┐               │
│  │    Client    │ ─────── CONNECT ─────────→│    Broker    │               │
│  │  (客户端)     │                           │   (代理)      │               │
│  │              │ ←────── CONNACK ──────────│              │               │
│  └──────────────┘         [Return Code]     └──────────────┘               │
│       │                                           │                         │
│       │ CONNECT包含: ClientID, Will Topic/Message │                         │
│       │            KeepAlive, Username/Password   │                         │
│       ▼                                           ▼                         │
│                                                                             │
│  订阅主题:                                                                  │
│  ┌──────────────┐                           ┌──────────────┐               │
│  │    Client    │ ─────── SUBSCRIBE ───────→│              │               │
│  │              │  (Topic: "/sensors/temp",  │              │               │
│  │              │   QoS: 1)                  │              │               │
│  │              │ ←────── SUBACK ────────────│              │               │
│  └──────────────┘                           └──────────────┘               │
│       │                                           │                         │
│       ▼                                           ▼                         │
│                                                                             │
│  发布消息 (QoS 0 - 最多一次):                                                │
│  ┌──────────────┐                           ┌──────────────┐               │
│  │   Publisher  │ ─────── PUBLISH ─────────→│              │               │
│  │  (温度传感器) │  (Topic: "/sensors/temp", │              │               │
│  │              │   Payload: 23.5, QoS: 0)  │    Broker    │               │
│  │              │                           │              │               │
│  └──────────────┘                           └──────┬───────┘               │
│                                                    │                        │
│                                                    ▼                        │
│                                          转发给所有订阅者                    │
│                                                    │                        │
│  ┌──────────────┐                           ┌──────┴───────┐               │
│  │   Subscriber │ ←────── PUBLISH ──────────│              │               │
│  │  (监控应用)   │  (相同消息内容)            │              │               │
│  └──────────────┘                           └──────────────┘               │
│                                                                             │
│  发布消息 (QoS 1 - 至少一次):                                                │
│  ┌──────────────┐                           ┌──────────────┐               │
│  │   Publisher  │ ─────── PUBLISH ─────────→│              │               │
│  │              │ ←────── PUBACK ───────────│    Broker    │               │
│  └──────────────┘     (确认接收)             └──────┬───────┘               │
│                                                     │                       │
│                                          ┌──────────┘                       │
│                                          ▼                                  │
│                                    转发给订阅者                              │
│                                          │                                  │
│  ┌──────────────┐                 ┌──────┴───────┐                          │
│  │   Subscriber │ ←── PUBLISH ────│              │                          │
│  │              │ ───→ PUBACK ───→│              │                          │
│  └──────────────┘                 └──────────────┘                          │
│                                                                             │
│  发布消息 (QoS 2 - 恰好一次):                                                │
│  ┌──────────────┐                           ┌──────────────┐               │
│  │   Publisher  │ ─────── PUBLISH ─────────→│              │               │
│  │              │ ←────── PUBREC ───────────│              │               │
│  │              │ ─────── PUBREL ──────────→│    Broker    │               │
│  │              │ ←────── PUBCOMP ──────────│              │               │
│  └──────────────┘                           └──────────────┘               │
│       (四次握手确保恰好一次传输)                                             │
│                                                                             │
│  保持连接 (KeepAlive):                                                      │
│  ┌──────────────┐                           ┌──────────────┐               │
│  │    Client    │ ←── PINGREQ / PINGRESP ──→│    Broker    │               │
│  │              │   (按KeepAlive间隔)        │              │               │
│  └──────────────┘                           └──────────────┘               │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘
```

---

## 图4: 嵌入式系统软件架构

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                     嵌入式系统软件架构 (以FreeRTOS为例)                        │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│  ╔═══════════════════════════════════════════════════════════════════════╗ │
│  ║                         应用层 (Applications)                          ║ │
│  ║                                                                        ║ │
│  ║   ┌──────────────┐  ┌──────────────┐  ┌──────────────┐              ║ │
│  ║   │   业务任务1   │  │   业务任务2   │  │   业务任务N   │              ║ │
│  ║   │ (数据采集)    │  │ (网络通信)    │  │ (控制逻辑)    │              ║ │
│  ║   │              │  │              │  │              │              ║ │
│  ║   │ Priority: 2  │  │ Priority: 3  │  │ Priority: 1  │              ║ │
│  ║   │ Stack: 512B  │  │ Stack: 1024B │  │ Stack: 256B  │              ║ │
│  ║   └──────┬───────┘  └──────┬───────┘  └──────┬───────┘              ║ │
│  ║          └─────────────────┼─────────────────┘                       ║ │
│  ║                            ▼                                         ║ │
│  ║                   ┌─────────────────┐                                ║ │
│  ║                   │   任务间通信      │                                ║ │
│  ║                   │ 队列/信号量/事件  │                                ║ │
│  ║                   └─────────────────┘                                ║ │
│  ╚═══════════════════════════════════════════════════════════════════════╝ │
│                                    │                                        │
│  ╔═══════════════════════════════════════════════════════════════════════╗ │
│  ║                      中间件层 (Middleware)                             ║ │
│  ║                                                                        ║ │
│  ║   ┌──────────────┐  ┌──────────────┐  ┌──────────────┐              ║ │
│  ║   │   FreeRTOS   │  │   LWIP       │  │   文件系统    │              ║ │
│  ║   │   内核        │  │   协议栈      │  │  (FAT/ Little)│             ║ │
│  ║   │              │  │              │  │              │              ║ │
│  ║   │ • 任务调度    │  │ • TCP/IP     │  │ • 存储管理    │              ║ │
│  ║   │ • 内存管理    │  │ • MQTT Client│  │ • 掉电保护    │              ║ │
│  ║   │ • 中断管理    │  │ • SNTP       │  │              │              ║ │
│  ║   └──────────────┘  └──────────────┘  └──────────────┘              ║ │
│  ╚═══════════════════════════════════════════════════════════════════════╝ │
│                                    │                                        │
│  ╔═══════════════════════════════════════════════════════════════════════╗ │
│  ║                    硬件抽象层 (HAL / BSP)                               ║ │
│  ║                                                                        ║ │
│  ║   ┌──────────────┐  ┌──────────────┐  ┌──────────────┐              ║ │
│  ║   │   启动代码    │  │   时钟配置    │  │   外设驱动    │              ║ │
│  ║   │  (Startup)   │  │  (RCC/PWR)   │  │  (GPIO/UART) │              ║ │
│  ║   │              │  │              │  │              │              ║ │
│  ║   │ • 向量表     │  │ • PLL配置    │  │ • DMA管理    │              ║ │
│  ║   │ • 初始化     │  │ • 低功耗     │  │ • 中断处理   │              ║ │
│  ║   └──────────────┘  └──────────────┘  └──────────────┘              ║ │
│  ╚═══════════════════════════════════════════════════════════════════════╝ │
│                                    │                                        │
│  ╔═══════════════════════════════════════════════════════════════════════╗ │
│  ║                        硬件层 (Hardware)                                ║ │
│  ║                                                                        ║ │
│  ║   ┌──────────────┐  ┌──────────────┐  ┌──────────────┐              ║ │
│  ║   │   STM32F4    │  │   外设       │  │   存储器      │              ║ │
│  ║   │  Cortex-M4   │  │  (ADC/TIM)   │  │  (Flash/RAM) │              ║ │
│  ║   │              │  │              │  │              │              ║ │
│  ║   │ 168MHz       │  │ WiFi模块     │  │  1MB / 192KB │              ║ │
│  ║   │ DSP/FPU      │  │ 传感器       │  │  SD卡槽      │              ║ │
│  ║   └──────────────┘  └──────────────┘  └──────────────┘              ║ │
│  ╚═══════════════════════════════════════════════════════════════════════╝ │
│                                                                             │
│  内存布局:                                                                  │
│  ┌─────────────────────────────────────────────────────────────────────┐   │
│  │  0x0800_0000 │  代码区 (Flash)      │  Bootloader + Application    │   │
│  │  0x0808_0000 │  配置区              │  用户参数/校准数据           │   │
│  │  0x2000_0000 │  数据区 (RAM)        │  全局变量/堆/任务栈          │   │
│  │  0x2003_0000 │  栈顶               │  主栈空间                    │   │
│  └─────────────────────────────────────────────────────────────────────┘   │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘
```

---

## 图5: 边缘AI推理流程

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                          边缘AI推理架构                                      │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│  云端训练 → 模型优化 → 边缘部署 → 实时推理                                    │
│                                                                             │
│  ┌─────────────────────────────────────────────────────────────────────┐   │
│  │                          阶段1: 云端训练                             │   │
│  │  ┌───────────────┐    ┌───────────────┐    ┌───────────────┐       │   │
│  │  │   原始数据     │───→│   数据增强     │───→│   模型训练     │       │   │
│  │  │  (图片/传感器) │    │  (旋转/缩放)   │    │  (PyTorch/TF) │       │   │
│  │  └───────────────┘    └───────────────┘    └───────────────┘       │   │
│  │                                                       │            │   │
│  │                                                       ▼            │   │
│  │                                              ┌───────────────┐     │   │
│  │                                              │   预训练模型    │     │   │
│  │                                              │  (ResNet/YOLO)│     │   │
│  │                                              └───────┬───────┘     │   │
│  └──────────────────────────────────────────────────────┼────────────┘   │
│                                                         │                 │
│  ┌──────────────────────────────────────────────────────┼────────────┐   │
│  │                      阶段2: 模型优化                    │            │   │
│  │                                                      ▼            │   │
│  │  ┌───────────────┐    ┌───────────────┐    ┌───────────────┐      │   │
│  │  │    量化       │    │    剪枝       │    │   知识蒸馏     │      │   │
│  │  │ (FP32→INT8)  │    │ (移除冗余)    │    │  (轻量模型)    │      │   │
│  │  └───────┬───────┘    └───────┬───────┘    └───────┬───────┘      │   │
│  │          └────────────────────┼────────────────────┘              │   │
│  │                               ▼                                   │   │
│  │                      ┌───────────────┐                            │   │
│  │                      │   优化后模型   │                            │   │
│  │                      │  (< 10MB)     │                            │   │
│  │                      └───────┬───────┘                            │   │
│  └──────────────────────────────┼────────────────────────────────────┘   │
│                                 │                                         │
│  ┌──────────────────────────────┼────────────────────────────────────┐   │
│  │                      阶段3: 边缘部署                  │            │   │
│  │                                                      ▼            │   │
│  │  ┌───────────────┐    ┌───────────────┐    ┌───────────────┐      │   │
│  │  │  模型转换     │    │  格式选择     │    │  OTA推送      │      │   │
│  │  │ (ONNX/TF Lite)│    │ • TFLite     │    │  (差分更新)    │      │   │
│  │  └───────────────┘    │ • NCNN       │    └───────┬───────┘      │   │
│  │                       │ • MNN        │            │              │   │
│  │                       └───────────────┘            ▼              │   │
│  │                                           ┌───────────────┐       │   │
│  │                                           │  边缘设备存储  │       │   │
│  │                                           └───────────────┘       │   │
│  └───────────────────────────────────────────────────────────────────┘   │
│                                                                           │
│  ┌─────────────────────────────────────────────────────────────────────┐ │
│  │                        阶段4: 实时推理                               │ │
│  │                                                                     │ │
│  │   输入 → 预处理 → 推理引擎 → 后处理 → 输出/决策                        │ │
│  │                                                                     │ │
│  │  ┌─────┐   ┌─────┐   ┌─────────────┐   ┌─────┐   ┌─────┐         │ │
│  │  │图像 │──→│归一化│──→│ TensorFlow  │──→│ NMS │──→│结果 │         │ │
│  │  │采集 │   │缩放 │   │  Lite Micro │   │过滤 │   │输出 │         │ │
│  │  └─────┘   └─────┘   └─────────────┘   └─────┘   └─────┘         │ │
│  │                           │                                       │ │
│  │                           ▼                                       │ │
│  │                   ┌───────────────┐                               │ │
│  │                   │  硬件加速      │                               │ │
│  │                   │ • ARM NEON    │                               │ │
│  │                   │ • CMSIS-NN    │                               │ │
│  │                   │ • GPU/NPU     │                               │ │
│  │                   └───────────────┘                               │ │
│  │                                                                     │ │
│  │   性能目标: 推理延迟 < 100ms, 功耗 < 5W, 准确率 > 90%                │ │
│  │                                                                     │ │
│  └─────────────────────────────────────────────────────────────────────┘ │
│                                                                           │
└───────────────────────────────────────────────────────────────────────────┘
```

---

## 图6: 完整IoT系统数据流

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                          IoT系统端到端数据流                                  │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│  数据采集                    数据传输                   数据处理            │
│                                                                             │
│  ┌─────────┐              ┌─────────┐              ┌─────────┐             │
│  │ 传感器1 │              │         │              │         │             │
│  │ 温度    │──────────────┤         │              │         │             │
│  └─────────┘   ADC转换    │         │              │         │             │
│                           │  边缘   │              │         │             │
│  ┌─────────┐              │  网关   │              │  边缘   │             │
│  │ 传感器2 │              │         │   4G/WiFi    │  服务器  │             │
│  │ 振动    │──────────────┤ (Modbus │──────────────┤         │             │
│  └─────────┘   数字信号    │ 转MQTT) │   加密传输    │         │             │
│                           │         │              │         │             │
│  ┌─────────┐              │         │              │  (数据   │             │
│  │ 摄像头  │              │         │              │  预处理) │             │
│  │ 视频流  │──────────────┤         │              │         │             │
│  └─────────┘   H.264压缩  │         │              └────┬────┘             │
│                           └─────────┘                   │                   │
│                                                         ▼                   │
│  原始数据                                               清洗后数据           │
│  ┌─────────────┐                                   ┌─────────────┐         │
│  │ 时序数据    │                                   │  过滤异常   │         │
│  │ 23.5°C     │                                   │  聚合统计   │         │
│  │ 0.3g       │                                   │  特征提取   │         │
│  │ ...        │                                   │  ...        │         │
│  └─────────────┘                                   └──────┬──────┘         │
│                                                           │                 │
│  ┌────────────────────────────────────────────────────────┘                 │
│  │                                                                          │
│  ▼                                                                          │
│  ┌─────────────────────────────────────────────────────────────────────┐   │
│  │                        数据分发 (MQTT Broker)                        │   │
│  │                                                                      │   │
│  │   Topic: factory/line1/sensor/temp ─────┐                           │   │
│  │   Topic: factory/line1/sensor/vibration─┼──→ 订阅者1 (SCADA)        │   │
│  │   Topic: factory/line1/alert/emergency ─┼──→ 订阅者2 (告警系统)      │   │
│  │   Topic: factory/line1/ai/prediction   ─┴──→ 订阅者3 (AI分析)        │   │
│  │                                                                      │   │
│  └─────────────────────────────────────────────────────────────────────┘   │
│                                    │                                        │
│          ┌─────────────────────────┼─────────────────────────┐              │
│          │                         │                         │              │
│          ▼                         ▼                         ▼              │
│  ┌───────────────┐          ┌───────────────┐          ┌───────────────┐   │
│  │   实时监控    │          │   历史存储    │          │   AI分析      │   │
│  │   (SCADA)     │          │   (时序DB)    │          │   (预测维护)   │   │
│  │               │          │               │          │               │   │
│  │ • 仪表盘      │          │ • InfluxDB    │          │ • 异常检测     │   │
│  │ • 实时告警    │          │ • TimescaleDB │          │ • 趋势预测     │   │
│  │ • 操作控制    │          │ • TDengine    │          │ • 自动报告     │   │
│  └───────────────┘          └───────────────┘          └───────────────┘   │
│                                                                             │
│  最终用户界面:                                                               │
│  ┌─────────┐  ┌─────────┐  ┌─────────┐  ┌─────────┐                        │
│  │  Web    │  │  App    │  │ 大屏    │  │ API     │                        │
│  │  管理   │  │  移动端  │  │ 可视化  │  │ 集成    │                        │
│  └─────────┘  └─────────┘  └─────────┘  └─────────┘                        │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘
```

---

## 图7: 安全架构

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                          边缘计算安全架构                                     │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│  安全层级:                                                                  │
│                                                                             │
│  ┌─────────────────────────────────────────────────────────────────────┐   │
│  │ 7. 应用安全: 代码签名、安全启动、OTA验证                              │   │
│  ├─────────────────────────────────────────────────────────────────────┤   │
│  │ 6. 数据安全: 传输加密(TLS)、存储加密、敏感数据脱敏                     │   │
│  ├─────────────────────────────────────────────────────────────────────┤   │
│  │ 5. 网络安全: 防火墙、网络分段、VPN隧道                                │   │
│  ├─────────────────────────────────────────────────────────────────────┤   │
│  │ 4. 接入安全: X.509证书、双向TLS(mTLS)、设备认证                       │   │
│  ├─────────────────────────────────────────────────────────────────────┤   │
│  │ 3. 固件安全: 安全启动(Secure Boot)、固件签名、防回滚                  │   │
│  ├─────────────────────────────────────────────────────────────────────┤   │
│  │ 2. 硬件安全: 可信执行环境(TEE)、硬件安全模块(HSM)                     │   │
│  ├─────────────────────────────────────────────────────────────────────┤   │
│  │ 1. 物理安全: 设备防拆、可信制造、供应链安全                           │   │
│  └─────────────────────────────────────────────────────────────────────┘   │
│                                                                             │
│  典型安全方案 (MQTT with TLS):                                              │
│                                                                             │
│       设备                    边缘网关                   云端               │
│  ┌───────────┐             ┌───────────┐            ┌───────────┐          │
│  │ 设备证书   │────────────→│ 证书验证   │───────────→│ 证书颁发   │          │
│  │ +私钥     │   mTLS      │ +代理     │   mTLS     │ (CA)      │          │
│  └───────────┘             └───────────┘            └───────────┘          │
│       │                         │                      │                    │
│       ▼                         ▼                      ▼                    │
│  ┌───────────┐             ┌───────────┐            ┌───────────┐          │
│  │ 加密传输   │             │ 协议转换   │            │ 身份管理   │          │
│  │ AES-256   │             │ MQTT代理   │            │ IAM       │          │
│  └───────────┘             └───────────┘            └───────────┘          │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘
```

---

*架构图集 - 边缘计算与IoT*
